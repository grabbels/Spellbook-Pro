import{S as G,i as J,s as K,w as L,x as Q,y as W,f as X,t as Y,z as Z,a0 as M,a4 as y,k as _,q as R,a as x,l as h,m as g,r as j,h as v,c as N,p as ee,n as o,b as se,a1 as l,a2 as C,a3 as O,$ as te}from"../../../../chunks/singletons-4e7778da.js";import{S as ae,n as P,p as A,v as re}from"../../../../chunks/stores-f5e17f9d.js";/* empty css                                                              */import{s as oe}from"../../../../chunks/supabaseClient-e444a6b7.js";function le(p){let t,s,e,a,r,m,w,n,i,I,d,c,u,V,E,D,T,q,$;return{c(){t=_("div"),s=_("div"),e=_("div"),a=_("div"),r=_("h2"),m=R("Update password"),w=x(),n=_("form"),i=_("input"),I=x(),d=_("input"),c=x(),u=_("button"),V=R(`Change password
							`),E=_("div"),D=_("i"),this.h()},l(f){t=h(f,"DIV",{class:!0});var b=g(t);s=h(b,"DIV",{class:!0});var z=g(s);e=h(z,"DIV",{class:!0});var B=g(e);a=h(B,"DIV",{class:!0});var U=g(a);r=h(U,"H2",{style:!0});var F=g(r);m=j(F,"Update password"),F.forEach(v),w=N(U),n=h(U,"FORM",{class:!0});var k=g(n);i=h(k,"INPUT",{type:!0,autocomplete:!0,placeholder:!0}),I=N(k),d=h(k,"INPUT",{type:!0,placeholder:!0}),c=N(k),u=h(k,"BUTTON",{class:!0,type:!0});var S=g(u);V=j(S,`Change password
							`),E=h(S,"DIV",{class:!0});var H=g(E);D=h(H,"I",{class:!0}),g(D).forEach(v),H.forEach(v),S.forEach(v),k.forEach(v),U.forEach(v),B.forEach(v),z.forEach(v),b.forEach(v),this.h()},h(){ee(r,"margin-bottom","1rem"),o(i,"type","password"),o(i,"autocomplete","new-password"),o(i,"placeholder","Password"),i.required=!0,o(d,"type","password"),o(d,"placeholder","Password (again)"),d.required=!0,o(D,"class","ri-loader-5-line svelte-k58xsa"),o(E,"class","svelte-k58xsa"),o(u,"class",T=(p[0]?"loading":"")+" button fill accent svelte-k58xsa"),o(u,"type","submit"),o(n,"class","svelte-k58xsa"),o(a,"class","register_form"),o(e,"class","panel_inner"),o(s,"class","register section"),o(t,"class","grid svelte-k58xsa")},m(f,b){se(f,t,b),l(t,s),l(s,e),l(e,a),l(a,r),l(r,m),l(a,w),l(a,n),l(n,i),C(i,p[1]),l(n,I),l(n,d),C(d,p[2]),l(n,c),l(n,u),l(u,V),l(u,E),l(E,D),q||($=[O(i,"input",p[4]),O(d,"input",p[5]),O(n,"submit",p[6])],q=!0)},p(f,b){b&2&&i.value!==f[1]&&C(i,f[1]),b&4&&d.value!==f[2]&&C(d,f[2]),b&1&&T!==(T=(f[0]?"loading":"")+" button fill accent svelte-k58xsa")&&o(u,"class",T)},d(f){f&&v(t),q=!1,te($)}}}function ne(p){let t,s;return t=new ae({props:{name:"login",$$slots:{default:[le]},$$scope:{ctx:p}}}),{c(){L(t.$$.fragment)},l(e){Q(t.$$.fragment,e)},m(e,a){W(t,e,a),s=!0},p(e,[a]){const r={};a&1031&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){s||(X(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){Z(t,e)}}}function ie(p,t,s){let e,a;M(p,P,c=>s(7,e=c)),M(p,A,c=>s(8,a=c)),y(A,a="Password reset",a);let r=!1,m,w;async function n(){if(y(P,e="",e),m.length>5)if(m===w){s(0,r=!0);const{data:c,error:u}=await oe.auth.updateUser({password:m});c.user==null?(s(0,r=!1),y(P,e="This password reset link is invalid or has expired.#error",e)):c?(s(0,r=!1),y(P,e="Password changes succesfully#positive",e),console.log(c),re("/account/login")):u&&(s(0,r=!1),console.log(u),y(P,e="Oops, an error occurred. Error code: "+u.code+"#error",e))}else s(0,r=!1),y(P,e="The passwords do not match#error",e);else y(P,e="Password should be at least 6 characters long#error",e)}function i(){m=this.value,s(1,m)}function I(){w=this.value,s(2,w)}return[r,m,w,n,i,I,c=>{c.preventDefault,n()}]}class fe extends G{constructor(t){super(),J(this,t,ie,ne,K,{})}}export{fe as default};
